# 个人记账系统 PRD（阶段 1）

## 目标与范围
- 目标：提供一个多用户、桌面端优先的个人记账系统，支持快速录入、分类统计、账户与预算管理，适合家庭或小团队共同使用。
- 终端形态：桌面端优先（浏览器为主），移动端可用但非优先。
- 约束：多用户并发使用；数据需可追溯与可导出；重视录入效率与可读性。

## 角色与用户画像
- 管理员：创建与管理组织、用户、权限；维护分类与账户；查看全局统计。
- 普通用户：记账、查询、导出个人或被授权的账本数据。
- 只读用户：浏览授权范围内的数据与报表。

## 用户故事（User Stories）
1. 作为管理员，我希望能创建组织与用户账号，便于多人协作记账。
2. 作为管理员，我希望为用户分配角色与权限，以控制可见数据范围。
3. 作为用户，我希望能快速新增一笔收支记录，以减少记录成本。
4. 作为用户，我希望能按分类、账户、日期筛选账目，以便快速查找。
5. 作为用户，我希望能查看月度/年度统计报表，以了解收支结构。
6. 作为用户，我希望能设置预算并追踪执行情况，以避免超支。
7. 作为用户，我希望能导出账单（CSV），以便备份或二次分析。
8. 作为管理员，我希望能维护分类与账户结构，保持数据一致性。

## 验收标准（Acceptance Criteria）
1. 账号与权限
   - 支持创建组织、用户，用户具备角色（管理员/普通/只读）。
   - 不同角色只能访问授权范围内的数据与操作。
2. 记账
   - 支持新增收入与支出记录，字段包含：金额、日期、分类、账户、备注、标签（可选）。
   - 录入完成后在列表页可见且可搜索。
3. 查询与筛选
   - 账目列表支持按日期范围、分类、账户、金额区间筛选。
   - 支持关键词搜索（备注/标签）。
4. 统计报表
   - 提供月度与年度统计视图，展示总收入、总支出、结余。
   - 支持按分类的支出占比与趋势图（基础可视化）。
5. 预算
   - 支持创建预算（按月、按分类可选）。
   - 预算执行情况可在报表或预算页查看（已用/剩余/超支提示）。
6. 数据导出
   - 支持导出筛选后的账目为 CSV。
7. 可用性
   - 桌面端布局清晰，核心操作在 2 步内可完成（如新增记账）。

## 页面架构（Page Architecture）
1. 登录/注册
   - 登录、组织选择（若用户属于多个组织）。
2. 仪表盘
   - 快捷新增记账入口
   - 近期收支概览
   - 预算执行摘要
3. 记账列表页
   - 账目列表、筛选器、搜索
   - 账目详情弹窗/侧边栏
4. 记账新增/编辑页
   - 统一表单（收入/支出切换）
5. 分类与账户管理页
   - 分类层级或分组管理
   - 账户管理
6. 预算管理页
   - 预算列表、预算详情
7. 报表页
   - 月度/年度统计
   - 分类占比、趋势
8. 用户与权限管理页（管理员）
   - 用户列表、角色分配
9. 系统设置页（管理员）
   - 组织信息、数据导出、备份策略

## 数据模型（Data Model）
- Organization
  - id, name, created_at
- User
  - id, org_id, name, email, password_hash, role, status, created_at
- Account
  - id, org_id, name, type, currency, balance, created_at
- Category
  - id, org_id, name, type(income/expense), parent_id, created_at
- Transaction
  - id, org_id, user_id, account_id, category_id, amount, type(income/expense),
    occurred_at, note, tags, created_at, updated_at
- Budget
  - id, org_id, name, period(monthly/yearly), category_id(optional),
    amount, start_date, end_date, created_at
- AuditLog
  - id, org_id, user_id, action, entity, entity_id, created_at

## 非功能需求
- 性能：账目列表在 10 万条数据下，筛选响应 < 2 秒。
- 安全：密码加密存储；关键操作留审计日志。
- 可靠性：支持每日备份导出。
- 可扩展性：数据模型支持后续多币种与自定义字段扩展。

## 里程碑
- 阶段 1：PRD 完成
- 阶段 2：实现可运行 MVP
- 阶段 3：测试覆盖与验收
